<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <base target="_blank" />
  <title>JavScript - DOM</title>
  <link rel="stylesheet" href="./css/all.css">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?51af31ebd7b05fdb3e478e13b16e757b";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
</head>
<body spellcheck="false" class="ppt">
  <section class="slide slide-cover">
    <h1>JavaScript - DOM</h1>
    <h2 class="h3">redky@qq.com</h2>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>DOM</h1>
    </div>
    <div class="bd">
      <ul>
        <li>DOM: Document Object Model
        <li>DOM Tree
        <li>由 Node/Element 组成
      </ul>
      <div class="image" style="text-align: left;">
        <img src="./images/dom/dom-tree.jpg" />
      </div>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>Node/Element</h1>
    </div>
    <div class="bd">
      <ul>
        <li>element.id/element.className/...
        <li>element.nodeName/element.tagName
        <li>element.nodeType
          <ul>
            <li>Element(1)
            <li>Attribute(2)
            <li>Text(3)
            <li>Comment(8)
            <li>Document(9)
            <li>DocumentFragment(11)
          </ul>
        <li>element.nodeValue - Text Node
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>Attributes</h1>
    </div>
    <div class="bd">
      <ul>
        <li>element.attributes
        <li>element.hasAttribute( key )
        <li>element.getAttribute( key )
        <li>element.setAttribute( key, value )
        <li>element.removeAttribute( key )
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>classList<sup><mark>?</mark></sup></h1>
    </div>
    <div class="bd">
      <ul>
        <li>element.classList
        <li>element.classList.contains()
        <li>element.classList.add()
        <li>element.classList.remove()
        <li>element.classList.toggle()
      </ul>
      <h2>Homework</h2>
      <ul>
        <li>让低版本浏览器支持以上方法
        <li>(可选)实现 jQuery 中的 <a href="http://api.jquery.com/category/manipulation/class-attribute/">class</a> 操作
        <li>查找 class 含有 a, 但不包含 b 的 DOM 节点
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>dataset<sup><mark>?</mark></sup></h1>
    </div>
    <div class="bd">
      <p>element.dataset
      <h2>Homework</h2>
      <ul>
        <li>实现 namespace.data - 可参考 jQuery.data
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>get.. & query...</h1>
    </div>
    <div class="bd">
      <ul>
        <li>document.getElementById()
        <li>document.getElementsByTagName()
        <li>document.getElementsByName()
        <li>document.getElementsByClassName()<sup><mark>?</mark></sup>
        <li>document.querySelector()<sup><mark title="静态">?</mark></sup>
        <li>document.querySelectorAll()<sup><mark title="静态">?</mark></sup>
      </ul>
      <p>JavaScript DOM 编程艺术 - Image Gallery
      <a href="./demo/gallery/01/gallery.html">01</a>
      <a href="./demo/gallery/02/gallery.html">02</a>
      <a href="./demo/gallery/03/gallery.html">03</a>
      <a href="./demo/gallery/04/gallery.html">04</a>
      <h2>Homework</h2>
      <ul>
        <li>实现 getElementsByClassName 方法
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>DOM 节点关系</h1>
    </div>
    <div class="bd">
      <ul>
        <li>element.parentNode/element.parentElement<sup><mark>?</mark></sup>
        <li>element.nextSibling/element.nextElementSibling<sup><mark>?</mark></sup>
        <li>element.previousSibling/element.previousElementSibling<sup><mark>?</mark></sup>
        <li>element.firstChild/element.firstElementChild<sup><mark>?</mark></sup>
        <li>element.lastChild/element.lastElmentChild<sup><mark>?</mark></sup>
        <li>element.childNodes/element.children
        <li>element.hasChildNodes()<sup><mark>?</mark></sup>
        <li>element.childElementCount<sup><mark>?</mark></sup>
      </ul>
      <h2>Homework</h2>
      <ul>
        <li>向上遍历所有 DOM 节点 - 冒泡.
        <li>广度/深度遍历所有 DOM 节点 - 深度小于 3 的所有节点
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>DOM 节点关系<sup><mark>?</mark></sup></h1>
    </div>
    <div class="bd">
      <ul>
        <li class="toggle">element.closest( selector );
        <li>element.matches( selector )/element.matchesSelector( selector )
        <li>element.isEqualNode( node )
        <li>element.contains( node )/element.compareDocumentPosition( node )
          <ul>
            <li>0 相同元素
            <li>1 文档无关 - 两个节点不在相同文档
            <li>2 node 在 element 之前
            <li>4 node 在 element 之后
            <li>8 node 包含 element 节点
            <li>16 node 被 element 节点包含
            <li>32 扩展
          </ul>
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>创建 DOM 节点</h1>
    </div>
    <div class="bd">
      <ul>
        <li>document.createElement( tag )
        <li>document.createTextNode( text )
        <li>document.createDocumentFragment()
        <li>element.cloneNode( isdeep )
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>操作 DOM 节点</h1>
    </div>
    <div class="bd">
      <ul>
        <li>element.appendChild( node )
        <li>element.parentNode.insertBefore( node, element )
        <li>element.parentNode.replaceChild( node, element )
        <li>element.parentNode.removeChild( element )
        <li>element.remove()<sup><mark>?</mark></sup>
      </ul>
      <h2>Homework</h2>
      <ul>
        <li>实现 insertAfter
        <li>删除所有的 div 标签
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>操作 DOM 节点</h1>
    </div>
    <div class="bd">
      <ul>
        <li>element.innerHTML
        <li>element.innerText/element.textContent
          <ul>
            <li>node.innerText 不支持 style 和 script 标签.
            <li>node.innerText 不返回隐藏标签的内容.
            <li>node.innerText 会引起 reflow.
          </ul>
        <li>element.outerHTML
        <li>element.outerText
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>操作 DOM 节点<sup><mark>?</mark></sup></h1>
    </div>
    <div class="bd">
      <ul>
        <li>element.insertAdjacentElement( position, node )
        <li>element.insertAdjacentHTML( position, html )
        <li>element.insertAdjacentText( position, text )
      </ul>
      <p>position: beforebegin/afterbegin/beforeend/afterend
<pre class="code" data-type="html">
  &lt;!-- beforebegin --&gt;&lt;p&gt;&lt;!-- afterbegin --&gt;foo&lt;!--beforeend --&gt;&lt;/p&gt;&lt;!-- afterend --&gt;
</pre>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>Text Node<sup><mark>?</mark></sup></h1>
    </div>
    <div class="bd">
      <ul>
        <li>node.length
				<li><mark>textNode.nodeValue</mark>
				<li>textNode.data
        <li>textNode.appendData( text )
        <li>textNode.deleteData( text )
        <li>textNode.insertData( offset, count )
        <li>textNode.replaceData( offset, count, text )
        <li>textNode.splitText( offset )
        <li>textNode.substringData( offset, count )
        <li>node.normalize()
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>document</h1>
    </div>
    <div class="bd">
      <ul>
        <li>document.documentElement - root
        <li>iframe.contentDocument || iframe.contentWindow.document
        <li>document.charset
        <li>document.title
        <li>document.head
        <li>document.body == document.getElementsByTagName('body')[0]
        <li>document.links/document.images/document.forms
        <li>document.readyState - complete
        <li>document.activeElement
      </ul>
      <h2>Homework</h2>
      <ul>
        <li><a href="./demo/domsters/index.html">DOM 练习(JavaScript-DOM编程艺术)</a>
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>Style</h1>
    </div>
    <div class="bd">
      <ul>
        <li>element.style[ property ] = value
        <li>element.style.property
        <li>element.style.cssText = CSS_TEXT_STRING
        <li class="toggle">style = window.getComputedStyle( element, pseudo_class )
        <li>style = document.defaultView.getComputedStyle( element, pseduo_class )
        <li>style = element.currentStyle
      </ul>
      <h2>Homework</h2>
      <ul>
        <li>.css( key ) - opacity/background-position/z-index/css3
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>Element Size</h1>
    </div>
    <div class="bd">
      <ul>
        <li>use css( element, height )
        <li>element.clientHeight/element.clientWidth(content+padding)
        <li>element.scrollHeight/element.scrollWidth
        <li>element.offsetHeight/element.offsetWidth(content+padding+border+scrollbar)
        <li>element.scrollTop/element.scrollLeft
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>ViewPort Size</h1>
    </div>
    <div class="bd">
      <ul>
        <li>document.documentElement.clientHeight/document.documentElement.clientWidth(*)
        <li>window.innerHeight/window.innerWidth(包含滚动条)
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>relative viewport</h1>
    </div>
    <div class="bd">
      <ul>
        <li>element.getBoundingClientRect()
          <ul>
            <li>.top
            <li>.right
            <li>.bottom
            <li>.left
            <li>.width/.height
          </ul>
        <li>ie6/7 - 2px
      </ul>
      <h2>Homework</h2>
      <ul>
        <li>判断元素是否在窗口内
        <li>实现 stricy 效果
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>Page Size</h1>
    </div>
    <div class="bd">
      <ul>
        <li>(document.documentElement || document.body).offsetHeight(*)
        <li>(document.documentElement || document.body).scrollHeight
      </ul>
			<p>求以上最大值
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>relative document/parentNode</h1>
    </div>
    <div class="bd">
      <ul>
        <li>element.offsetParent(~parentNode)
        <li>element.offsetTop/element.offsetLeft
      </ul>
      <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement">https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement</a>
    </div>
  </section>

  <section class="slide">
    <div class="hd">
      <h1>scroll position</h1>
    </div>
    <div class="bd">
      <ul>
        <li>window.pageYOffset/window.pageXOffset(*)
        <li>document.documentElement.scrollTop/document.documentElement.scrollLeft
        <li>document.body.scrollTop/document.body.scrollLeft
      </ul>
      <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window.scrollY">https://developer.mozilla.org/en-US/docs/Web/API/Window.scrollY</a>
    </div>
  </section>
  <section class="slide toggle">
    <div class="hd">
      <h1>Homework</h1>
    </div>
    <div class="bd">
      <ul>
        <li>查找点击的li在ul中是第几个?
        <li>选项卡/幻灯片
        <li>列表的斑马线效果 - 高亮鼠标所在行
        <li>元素的规则运动动画
        <li>slideUp/slideDown/fadein/fadeout 效果
        <li>优化选择框(效果见QQ邮箱)
        <li>滚动加载新内容(无限加载/只加载n次, 然后显示页码)
        <li>图片惰性加载
        <li>placeholder - ie6/7/8
        <li>高度自适应的 DIV/Textarea
        <li>颜色选择器
      </ul>
    </div>
  </section>
  <section class="slide">
    <div class="hd">
      <h1>参考和扩展</h1>
    </div>
    <div class="bd">
      <ul>
        <li>http://w3help.org/
        <li>https://developer.mozilla.org/en-US/docs/Web/API/Node
        <li>https://developer.mozilla.org/en-US/docs/Web/API/Element
        <li>https://github.com/jquery/jquery/blob/master/src/offset.js
        <li>https://github.com/jquery/jquery/blob/master/src/dimensions.js
        <li>https://github.com/jquery/jquery/blob/master/src/css.js
        <li>https://github.com/jquery/jquery/blob/master/src/wrap.js
        <li>https://github.com/jquery/jquery/blob/master/src/traversing.js
        <li>https://github.com/jquery/jquery/blob/master/src/manipulation.js
      </ul>
    </div>
  </section>
  <section class="slide slide-cover">
    <h1>?</h1>
  </section>
  <nav id="navigator"></nav>
  <nav>
    <a href="#" class="nav-prev" data-id="nav" data-direction="previous"></a>
    <a href="#" class="nav-next" data-id="nav" data-direction="next"></a>
  </nav>
  <script src="./js/highlight.pack.js"></script>
  <script src="./js/event.js"></script>
  <script src="./js/se.js?v=1"></script>
  <script src="./js/hash.js"></script>
  <script src="./js/runcase.js?v=1"></script>
  <script src="./js/ui.js"></script>
  <script src="./js/app.js"></script>
  <script src="./js/auto.slide.js"></script>
</body>
</html>
