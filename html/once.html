<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>once</title>
</head>
<body>
  <button id="bind-default">默认绑定多次(2)</button>
  <button id="bind-once">使用绑定一次(bind once)</button>
  <script src="../scripts/once.js"></script>
  <script>
  ;(function() {

    function bindEvent() {
      if ( document.addEventListener ) {
        document.addEventListener( 'click', function() {
          alert( 'click' );
        }, false );
      }
      else if ( document.attachEvent ) {
        document.attachEvent( 'onclick', function() {
          alert( 'click' );
        });
      }
    }

    function stopPropagation( event ) {
      event = event || window.event;
      if ( event.stopPropagation ) {
        event.stopPropagation();
      }
      else {
        event.cancelBubble = true;
      }
    }

    var bindEventOnce = once( bindEvent );
    var bindDefault = document.getElementById( 'bind-default' );
    bindDefault.onclick = function( e ) {
      bindEvent();
      bindEvent();
      stopPropagation( e );
    };

    var bindOnce = document.getElementById( 'bind-once' );
    bindOnce.onclick = function( e ) {
      bindEventOnce();
      bindEventOnce();
      bindEventOnce();
      stopPropagation( e );
    };

  })();
  </script>
</body>
</html>