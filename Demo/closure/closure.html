
<!DOCTYPE html>

<html>
	<head>
		<meta content="text/html;charset=gb2312" http-equiv="Content-Type">
		<title>Closure demo</title>
	</head>
	
	<style type="text/css">
		div, ul, li {
			padding: 0;
			margin: 0;
		}
		
		ul, li {
			list-style: none;
		}
		
		.content {
			width: 760px;
			margin: 20px auto;
		}
		
		.content .tab-nav {
			border: 2px solid #C2CDDA;
			border-radius: 9px;
			padding: 10px;
			overflow: hidden;
			zoom: 1;
		}
		
		.content .tab-nav ul li {
			float: left;
			margin-right: 10px;
		}
		
		a {
			font-weight: bold;
			color: #175f9c;
			background-color: #fff;
			border: 2px solid #fff;
			display: inline-block;
			width: 60px;
			height: 30px;
			line-height: 30px;
			text-decoration: none;
			text-align: center;
			outline: 0 none;
		}
		
		a:visited{
			color: #175f9c;
			text-decoration: none;
		}
		
		a:hover {
			color: #ff0000;
			text-decoration: none;
		}
		
		a:active {
			color: #175f9c;
			text-decoration: none;
		}
		
		a.current {
			border-color: gray;
			border-radius: 5px;
		}
		
		a.current:hover {
			color: #175f9c;
		}
		
		.tab-content {
			font-size: 50px;
			font-weight: weight;
			width: 640px;
			height: 200px;
			padding: 60px;
			margin-top: 20px;
			border: 2px solid #C2CDDA;
			border-radius: 9px;
			text-align: center;
		}
		
	</style>
	
	<body onload="init();">
		
		<div class="content">
			<div class="tab-nav">
				<ul>
					<li><a href="#">Tab-1</a></li>
					<li><a href="#">Tab-2</a></li>
					<li><a href="#">Tab-3</a></li>
					<li><a href="#">Tab-4</a></li>
					<li><a href="#">Tab-5</a></li>
				</ul>
			</div>
			
			<div id="tab-content" class="tab-content"></div>
			
		</div>
		
		<script type="text/javascript">

			function init() {
				tabClick2();
			}

			function tabClick1() {
				var tabs = document.getElementsByTagName("a");
				for(var i=0, len=tabs.length; i<len; i++) {
					tabs[i].onclick = function() {
						removeCurrentClass();
						this.className = 'current';
						document.getElementById('tab-content').innerHTML = 'Tab-' + i;
					};
				}
				tabs = null;
			};

			//多加一层闭包，创建新的作用域，并在新的作用域中定义局部变量。每次循环创建的作用域都不相同，局部变量获取到的值也不相同
			function tabClick2() {
				var tabs = document.getElementsByTagName("a");
				for(var i=0, len=tabs.length; i<len; i++) {
					(function() {
						var index = i;
						tabs[index].onclick = function() {
							removeCurrentClass();
							this.className = 'current';
							document.getElementById('tab-content').innerHTML = 'Tab-' + (index+1);
						};
					})();
				}
				tabs = null;
			};
			
			
			//多加一层闭包，创建新的作用域，并在新的作用域中定义函数执行参数。每次循环创建的作用域都不相同，传递的函数参数值也不相同
			function tabClick3() {
				var tabs = document.getElementsByTagName("a");
				for(var i=0, len=tabs.length; i<len; i++) {
					tabs[i].onclick = (function(index) {
						return function() {
							removeCurrentClass();
							this.className = 'current';
							document.getElementById('tab-content').innerHTML = 'Tab-' + (index+1);
						}
					})(i);
				}
				tabs = null;
			};
			
			function removeCurrentClass() {
				var tabs = document.getElementsByTagName("a");
				for(var i=0, len=tabs.length; i<len; i++) {
					tabs[i].className = '';
				}
			}


			var MX = MX || {};

			MX.getUID = (function(){
				var uid = 0;
				return function() {
					return uid ++;
				}

			})();
		
		</script>
		
	</body>
</html>